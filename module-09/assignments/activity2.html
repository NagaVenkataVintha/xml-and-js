<!DOCTYPE html>
<html>
    <head>
        <title>People</title>

    </head>
    <body>
        <ol id="Emp"></ol>
        <script>
            
            
            function stringToNode(html) {
                const template = document.createElement(`template`);
                html = html.trim();
                template.innerHTML = html;
                return template.content.firstChild;
      }

            function createPerson(person){
                const content=`<li>
                    <p>${person.id}</p>
                    <h2>${person.firstname}</h2>
                    <h2>${person.lastname}</h2>
                    <p>${person.email}</p>
                    <p>${person.gender}</p>
                    <p>${person.ipaddress}</p>
                    </li>`;
                    return stringToNode(content);                
            }

            function parsePerson(xml){
                const id = xml.getElementsByTagName(`id`)[0].childNodes[0].nodeValue;
                const firstname = xml.getElementsByTagName(`first_name`)[0].childNodes[0].nodeValue;
                const lastname = xml.getElementsByTagName(`last_name`)[0].childNodes[0].nodeValue;
                const email = xml.getElementsByTagName(`email`)[0].childNodes[0].nodeValue;
                const gender = xml.getElementsByTagName(`gender`)[0].childNodes[0].nodeValue;
                const ipaddress = xml.getElementsByTagName(`ip_address`)[0].childNodes[0].nodeValue;

                return{
                    id,
                    firstname,
                    lastname,
                    email,
                    gender,
                    ipaddress,
                };
            }

            function displayData(xmlDoc){
                const Emp = xmlDoc.getElementsByTagName(`person`);
                const list = document.getElementById(`Emp`);

                for(let index=0;index < Emp.length; index++){
                    const element = Emp[index];
                    const parsedPerson = parsePerson(element);

                    const personElement = createPerson(parsedPerson);
                    list.appendChild(personElement);
                }
            }
            fetch("people.xml")
            .then((response) => response.text())
            .then((str) => new DOMParser().parseFromString(str, "text/xml"))
            .then(displayData);
        </script>
    </body>
</html>